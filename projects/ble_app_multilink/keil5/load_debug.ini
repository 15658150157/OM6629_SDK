/*
 * Function use to execute after reset via uVision reset button
*/
FUNC void OnResetExec(void)
{
    // disable WDT
    _WDWORD(0x400E00E8, 0x6666);

    // Invalid cache
    _WDWORD(0xE0042004, 1);
    _WDWORD(0xE0042000, 0);
    _sleep_(4);

    // Set PC & SP to flash firmware entry, address better uncacheable
    R0 = __Vectors;
    R1 = __Vectors + 4;

    // Set PC & SP to flash firmware entry, address better uncacheable
    exec("SP = _RDWORD(R0);");
    exec("PC = _RDWORD(R1);");
}

exec("OnResetExec();");